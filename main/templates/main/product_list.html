{% extends 'main/base.html' %}
{% load static %}

{% block title %}{{ category.name }} – MediMart{% endblock %}

{% block content %}
<section class="products container" style="max-width:1100px; margin:2rem auto;">

    <h2 style="margin-bottom:1.5rem; text-align:center;">{{ category.name }}</h2>

    <div class="product-grid" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(220px,1fr)); gap:1.5rem;">
        {% if products %}
            {% for product in products %}
                <div class="product-card" style="border:1px solid #ddd; padding:1rem; border-radius:8px; display:flex; flex-direction:column; align-items:center; text-align:center;">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width:100%; height:180px; object-fit:cover; border-radius:6px; margin-bottom:0.5rem;">
                    {% else %}
                        <img src="{% static 'main/images/product_placeholder.png' %}" alt="{{ product.name }}" style="width:100%; height:180px; object-fit:cover; border-radius:6px; margin-bottom:0.5rem;">
                    {% endif %}
                    <h3>{{ product.name }}</h3>
                    <p style="font-size:0.9rem; color:#555;">{{ product.description|truncatewords:20 }}</p>
                    <p class="price" style="font-weight:bold; margin:0.5rem 0;">৳{{ product.price }}</p>
                    <form action="{% url 'add_to_cart' product.id %}" method="post" style="width:100%;">
                        {% csrf_token %}
                        <button type="submit" class="btn primary-btn" style="width:100%; padding:0.5rem; background:#0066a0; color:#fff; border:none; border-radius:4px; cursor:pointer;">Add to Cart</button>
                    </form>
                </div>
            {% endfor %}
        {% else %}
            <p style="text-align:center; color:#555; font-size:1rem; padding:2rem; border:1px solid #ddd; border-radius:8px; background:#f9f9f9;">No products found in this category.</p>
        {% endif %}
    </div>
</section>
{% endblock %}
