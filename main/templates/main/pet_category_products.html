{% extends "main/base.html" %}
{% block title %}{{ category.name }} - MediMart{% endblock %}

{% block content %}
<section class="container" style="padding:2rem; max-width:1100px; margin:auto;">
  <h2 style="text-align:center; margin-bottom:1rem;">{{ category.name }}</h2>

  <div style="display:flex; flex-wrap:wrap; gap:18px; justify-content:center;">
    {% for product in products %}
      <div style="width:320px; background:#fff; border-radius:8px; padding:14px; box-shadow:0 2px 8px rgba(0,0,0,0.06);">
        {% if product.image %}
          <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width:100%; height:160px; object-fit:cover; border-radius:6px;">
        {% endif %}
        <h4 style="margin-top:10px;">{{ product.name }}</h4>
        <p style="color:#666; font-size:13px;">{{ product.description|truncatewords:18 }}</p>
        <p style="font-weight:bold;">à§³{{ product.price|floatformat:2 }}</p>

        <form method="post" action="{% url 'add_to_cart' product.id %}">
          {% csrf_token %}
          <input type="hidden" name="quantity" value="1">
          <button type="submit" class="btn" style="background:#0d6efd; color:#fff; padding:8px 12px; border-radius:6px;">Add to Cart</button>
        </form>
      </div>
    {% empty %}
      <p>No products available in this category yet.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
